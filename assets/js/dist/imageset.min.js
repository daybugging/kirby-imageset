/*!
 * ImageSet (1.0.0-beta1)
 *
 * This script file is needed for lazyloading imagesets,
 * generated with ImageSet for Kirby and rendering placeholder
 * effeccts
 *
 * Copyright (c) 2016 Fabian Michael <hallo@fabianmichael.de>
 * @license SEE LICENSE IN license.md
 *
 * This script also includes:
 *
 *   StackBlur 0.6
 *   Copyright (c) 2010 Mario Klingemann <mario@quasimondo.com>
 *   https://github.com/Quasimondo/QuasimondoJS
 *
 *   lazysizes 2.0.7 (with "static-gecko-picture" plugin)
 *   Copyright (C) 2015 Alexander Farkas, released under MIT license
 *   https://github.com/aFarkas/lazysizes
 * 
 */
!function(e,t,n){"use strict";function a(e,t,n,a,i,o,s,l){var d=e.getContext("2d"),c=d.getImageData(t,n,a,i);c=r(c,o,s,l),d.putImageData(c,t,n)}function r(e,t,n,a){var r,i,s,l,d,c,u,f,g,m,h,v,p,b,y,z,C,E,A,x,w,N,L,M,S,B=e.data,O=e.width,W=e.height,I=t+t+1,R=O-1,D=W-1,_=t+1,T=_*(_+1)/2,k=new o,P=k;for(s=1;s<I;s++)P=P.next=new o,s==_&&(S=P);P.next=k;var q=null,F=null;for(u=c=0,i=0;i<W;i++){for(z=C=E=A=f=g=m=h=0,v=_*(x=B[c]),p=_*(w=B[c+1]),b=_*(N=B[c+2]),y=_*(L=B[c+3]),f+=T*x,g+=T*w,m+=T*N,h+=T*L,P=k,s=0;s<_;s++)P.r=x,P.g=w,P.b=N,P.a=L,P=P.next;for(s=1;s<_;s++)l=c+((R<s?R:s)<<2),f+=(P.r=x=B[l])*(M=_-s),g+=(P.g=w=B[l+1])*M,m+=(P.b=N=B[l+2])*M,h+=(P.a=L=B[l+3])*M,z+=x,C+=w,E+=N,A+=L,P=P.next;for(q=k,F=S,r=0;r<O;r++)B[c]=f*n>>a,B[c+1]=g*n>>a,B[c+2]=m*n>>a,B[c+3]=h*n>>a,f-=v,g-=p,m-=b,h-=y,v-=q.r,p-=q.g,b-=q.b,y-=q.a,l=u+((l=r+t+1)<R?l:R)<<2,z+=q.r=B[l],C+=q.g=B[l+1],E+=q.b=B[l+2],A+=q.a=B[l+3],f+=z,g+=C,m+=E,h+=A,q=q.next,v+=x=F.r,p+=w=F.g,b+=N=F.b,y+=L=F.a,z-=x,C-=w,E-=N,A-=L,F=F.next,c+=4;u+=O}for(r=0;r<O;r++){for(C=E=A=z=g=m=h=f=0,c=r<<2,v=_*(x=B[c]),p=_*(w=B[c+1]),b=_*(N=B[c+2]),y=_*(L=B[c+3]),f+=T*x,g+=T*w,m+=T*N,h+=T*L,P=k,s=0;s<_;s++)P.r=x,P.g=w,P.b=N,P.a=L,P=P.next;for(d=O,s=1;s<=t;s++)c=d+r<<2,f+=(P.r=x=B[c])*(M=_-s),g+=(P.g=w=B[c+1])*M,m+=(P.b=N=B[c+2])*M,h+=(P.a=L=B[c+3])*M,z+=x,C+=w,E+=N,A+=L,P=P.next,s<D&&(d+=O);for(c=r,q=k,F=S,i=0;i<W;i++)l=c<<2,B[l+3]=L=h*n>>a,L>0?(L=255/L,B[l]=(f*n>>a)*L,B[l+1]=(g*n>>a)*L,B[l+2]=(m*n>>a)*L):B[l]=B[l+1]=B[l+2]=0,f-=v,g-=p,m-=b,h-=y,v-=q.r,p-=q.g,b-=q.b,y-=q.a,l=r+((l=i+_)<D?l:D)*O<<2,f+=z+=q.r=B[l],g+=C+=q.g=B[l+1],m+=E+=q.b=B[l+2],h+=A+=q.a=B[l+3],q=q.next,v+=x=F.r,p+=w=F.g,b+=N=F.b,y+=L=F.a,z-=x,C-=w,E-=N,A-=L,F=F.next,c+=O}return e}function i(e,t,n,a,r,i,s,l){var d,c,u,f,g,m,h,v,p,b,y,z,C,E,A,x,w,N,L,M,S,B=e.getContext("2d"),O=B.getImageData(t,n,a,r),W=O.data,I=i+i+1,R=a-1,D=r-1,_=i+1,T=_*(_+1)/2,k=new o,P=k;for(u=1;u<I;u++)P=P.next=new o,u==_&&(S=P);P.next=k;var q=null,F=null;for(h=m=0,c=0;c<r;c++){for(E=A=x=v=p=b=0,y=_*(w=W[m]),z=_*(N=W[m+1]),C=_*(L=W[m+2]),v+=T*w,p+=T*N,b+=T*L,P=k,u=0;u<_;u++)P.r=w,P.g=N,P.b=L,P=P.next;for(u=1;u<_;u++)f=m+((R<u?R:u)<<2),v+=(P.r=w=W[f])*(M=_-u),p+=(P.g=N=W[f+1])*M,b+=(P.b=L=W[f+2])*M,E+=w,A+=N,x+=L,P=P.next;for(q=k,F=S,d=0;d<a;d++)W[m]=v*s>>l,W[m+1]=p*s>>l,W[m+2]=b*s>>l,v-=y,p-=z,b-=C,y-=q.r,z-=q.g,C-=q.b,f=h+((f=d+i+1)<R?f:R)<<2,E+=q.r=W[f],A+=q.g=W[f+1],x+=q.b=W[f+2],v+=E,p+=A,b+=x,q=q.next,y+=w=F.r,z+=N=F.g,C+=L=F.b,E-=w,A-=N,x-=L,F=F.next,m+=4;h+=a}for(d=0;d<a;d++){for(A=x=E=p=b=v=0,m=d<<2,y=_*(w=W[m]),z=_*(N=W[m+1]),C=_*(L=W[m+2]),v+=T*w,p+=T*N,b+=T*L,P=k,u=0;u<_;u++)P.r=w,P.g=N,P.b=L,P=P.next;for(g=a,u=1;u<=i;u++)m=g+d<<2,v+=(P.r=w=W[m])*(M=_-u),p+=(P.g=N=W[m+1])*M,b+=(P.b=L=W[m+2])*M,E+=w,A+=N,x+=L,P=P.next,u<D&&(g+=a);for(m=d,q=k,F=S,c=0;c<r;c++)f=m<<2,W[f]=v*s>>l,W[f+1]=p*s>>l,W[f+2]=b*s>>l,v-=y,p-=z,b-=C,y-=q.r,z-=q.g,C-=q.b,f=d+((f=c+_)<D?f:D)*a<<2,v+=E+=q.r=W[f],p+=A+=q.g=W[f+1],b+=x+=q.b=W[f+2],q=q.next,y+=w=F.r,z+=N=F.g,C+=L=F.b,E-=w,A-=N,x-=L,F=F.next,m+=a}B.putImageData(O,t,n)}function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e.stackBlur={canvasRGB:i,canvasRGBA:a}}(window,document),function(e,t,n,a,r){"use strict";function i(e){"loading"!=t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(e,t){var n;return function(){var a=arguments,r=this;if(!n)return e.apply(r,a),n=!0,setTimeout(function(){return n=!1},t)}}function l(e,t,n){if(n=n||!1,e.complete&&void 0!==e.naturalWidth&&0!==e.naturalWidth)console.log("instant success",e),t();else{var a=function(){this.removeEventListener("load",a),console.log("death by callback",e),t()};if(e.addEventListener("load",a),n){var r=new Image;r.addEventListener("error",function(){n()}),r.src=e.src}}}function d(t,n){var a=e.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||1,i=a/r;if(a!==r){var o=t.width,s=t.height;t.width=o*i,t.height=s*i,n.scale(i,i)}return i}function c(e){var t=e.className.match(S);return!!t&&t[1]}function u(e){L(e,b)}function f(){function n(){for(var e,t,n,i=0,o=r.length;i<o;i++)r[i]&&(t=r[i],N(t,p)||(e=c(t))&&B[e]&&(n=B[e](t),"async"===a.placeholderRendering?w.add(n):n()))}var a=e.imagesetConfig=o({autoUpdate:!0,placeholderRendering:"async"},e.imagesetConfig||{}),r=t.getElementsByClassName(v),l=s(n);return t.addEventListener("lazybeforeunveil",function(e){console.log("unveil",e.target,performance.now());var n=e.target,a=n.parentNode;if(N(n,y)){for(;!N(a,g);)a=a.parentNode;var r=function(){n.removeEventListener("load",r),x(function(){L(a,m)})},i=function(){n.removeEventListener("error",i),x(function(){var e=t.createElement("span");L(e,C),n.hasAttribute("alt")&&""!==n.alt&&(e.setAttribute("aria-hidden",!0),e.appendChild(t.createTextNode(n.alt))),a.appendChild(e),x(function(){L(a,h)})})};n.addEventListener("load",r),n.addEventListener("error",i)}}),a.autoUpdate?(e.MutationObserver?new e.MutationObserver(l).observe(E,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):(E.addEventListener("DOMNodeInserted",l,!0),E.addEventListener("DOMAttrModified",l,!0),setInterval(l,999)),e.addEventListener("hashchange",l,!0),console.log("chech imagesets",performance.now()),n()):(console.log("dis"),i(n)),{update:n}}if(t.getElementsByClassName){var g="imageset",m="is-loaded",h="has-error",v=g+" -placeholder",p="is-placeholder-rendered",b="has-placeholder-error",y=g+"-element",z=g+"-placeholder",C="imageset-error",E=t.documentElement,A=navigator.userAgent,x=e.requestAnimationFrame||function(e){setTimeout(e,1e3/60)},w=function(){function e(e){a.push(e),n()}function t(){a.shift()(),a.length?x(t):r=!1}function n(){r||(r=!0,x(t))}var a=[],r=!1;return{add:e}}(),N=function(){return E.classList?function(e,t){return e.classList.contains(t)}:function(e,t){return!!~e.className.split(/\s+/).indexOf(t)}}(),L=function(){return E.classList?function(e,t){e.classList.add(t)}:function(e,t){var n=e.className.split(/\s+/);~n.indexOf(t)||(n.push(t),e.className=n.join(" "))}}();(function(){E.classList})();if("[object OperaMini]"===Object.prototype.toString.call(e.operamini)){console.log("opera mini!"),e.lazySizesConfig=e.lazySizesConfig||{},e.lazySizesConfig.init=!1,L(E,"operamini");var M=function(t){var n=t.getElementsByTagName("source"),a=t.getElementsByClassName(y)[0];if(L(t,m),e.HTMLPictureElement){for(var r=0,i=n.length;r<i;r++){var o=n[r];o.hasAttribute("data-srcset")&&(o.srcset=o.getAttribute("data-srcset")),o.hasAttribute("data-src")&&(o.src=o.getAttribute("data-src"))}a.hasAttribute("data-srcset")&&(a.srcset=a.getAttribute("data-srcset")),a.hasAttribute("data-src")&&(a.src=a.getAttribute("data-src"))}else{for(var s=n.length>0?n[n.length-1]:a,l=s.getAttribute("data-srcset").split(/,\s+/);n.length>0;)n[0].parentNode.removeChild(n[0]);a.src=l.pop().replace(/\s+\d+[wx]$/,"")}};return void i(function(){for(var e=t.getElementsByClassName(g),n=0,a=e.length;n<a;n++)M(e[n])})}var S=new RegExp("-placeholder:([a-z0-9_-]+)\\s*","i"),B={};if(e.CanvasRenderingContext2D){var O=-1!==A.indexOf("Safari")&&-1===A.indexOf("Chrome");("imageRendering"in E.style||"msInterpolationMode"in E.style)&&!O||(B.mosaic=function(e){var n=t.createElement("canvas"),a=n.getContext("2d"),r=e.getElementsByClassName(z)[0],i=function(){d(n,a);var t=r.naturalWidth,i=r.naturalHeight,o=e.offsetWidth,s=e.offsetWidth/t*i+.5|0;n.width=o,n.height=s,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,n.setAttribute("aria-hidden",!0),n.className=r.className,a.drawImage(r,0,0,o,s),r.parentNode.replaceChild(n,r),L(e,p)};return function(){l(r,i,function(){u(e)})}});var W=function(e,n,a,r){var i=e.getElementsByClassName(z)[0],o=function(){var o=i.naturalWidth,s=i.naturalHeight,l=e.offsetWidth,d=e.offsetWidth/o*s+.5|0,c=t.createElement("canvas"),u=c.getContext("2d"),f=N(e,"-alpha");c.width=l,c.height=d,!f&&"mozOpaque"in c&&(c.mozOpaque=!0),c.setAttribute("aria-hidden",!0),c.className=i.className,u.drawImage(i,0,0,l,d),stackBlur[f?"canvasRGBA":"canvasRGB"](c,0,0,l,d,n,a,r),i.parentNode.replaceChild(c,i),L(e,p)};return function(){l(i,o,function(){u(e)})}};B.blurred=function(e){return W(e,15,512,17)},B.lqip=function(e){return W(e,7,512,15)};var I=function(e,t,a){a=!!a;var r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),o=i.data,s=i.width,l=i.height,c=s-1,u=l-1,f=n.round(t*(n.sqrt(3)/2)),g=f/2,m=t/2;d(e,r);var h,v,p,b,y,z,C,E,A,x,w,N,L,M,S,B,O,W=function(e,n,a,i){i=i||!1;var o=e+(i?0:f);r.beginPath(),r.moveTo(o,n+0),r.lineTo(e+(i?f:0),n+m),r.lineTo(o,n+t),r.fill(),r.closePath()},I=function(e,t){var n=t*s*4+4*e;return[o[n],o[n+1],o[n+2],o[n+3]]},R=function(e,t){return o[t*s*4+4*e+3]},D=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=R(e[n][0],e[n][1]);return t/a},_=function(e){return"rgb("+e.slice(0,3).join(",")+")"},T=function(e){return e[3]/=255,"rgba("+e.join(",")+")"},k=function(e){return n.max(0,n.min(n.round(e),c))},P=function(e){return n.max(0,n.min(n.round(e),u))},q=n.ceil(s/f)+1,F=n.ceil(l/t)+1;if(a){for(v=0;v<F;v++)for(b=v*t,z=P(b+m),C=b-m,x=P(b),h=0;h<q;h++)p=h*f,M=h%2!=0,k(p),y=P(b),A=k(M?p+f-1:p),E=k(M?p:p+f-1),N=k(p+g),L=P(b+m),S=[[E,y],[A,L],[E,P(b+t-1)],[N,L],[N,L]],B=D(S)+.5|0,r.fillStyle=T([B,0,0,255]),r.fillRect(p,b,f,t),S=[[E,P(b-m)],[A,y],[E,P(b+m-1)],[N,y],[N,y]],B=D(S)+.5|0,r.fillStyle=T([B,0,0,255]),W(p,C,0,M);var H=r.getImageData(0,0,e.width,e.height),j=H.data,$=j.length;for(O=0;O<$;O+=4)j[O+3]=j[O];r.putImageData(H,0,0),r.globalCompositeOperation="source-atop"}for(v=0;v<F;v++)for(b=v*t,z=P(b+m),C=b-m,x=P(b),h=0;h<q;h++)p=h*f,w=k(p+g),M=h%2!=0,r.fillStyle=_(I(w,z)),r.fillRect(p,b,f,t),r.fillStyle=_(I(w,x)),W(p,C,0,M);a&&(r.globalCompositeOperation="source-over")};B.triangles=function(e){var a=e.getElementsByClassName(z)[0],r=function(){var r=a.naturalWidth,i=a.naturalHeight,o=e.offsetWidth,s=n.round(e.offsetWidth/r*i),l=t.createElement("canvas"),d=l.getContext("2d"),c=N(e,"-alpha");l.width=o,l.height=s,!c&&"mozOpaque"in l&&(l.mozOpaque=!0),l.setAttribute("aria-hidden",!0),l.className=a.className,d.drawImage(a,0,0,o,s),I(l,40,c),a.parentNode.replaceChild(l,a),L(e,p),console.log("placeholder rendered")};return function(){l(a,r,function(){u(e)})}}}var R=new f;e.imageset=R}}(window,document,Math,Date),function(e,t){var n=function(){t(e.lazySizes),e.removeEventListener("lazyunveilread",n,!0)};t=t.bind(null,e,e.document),"object"==typeof module&&module.exports?t(require("lazysizes")):e.lazySizes?n():e.addEventListener("lazyunveilread",n,!0)}(window,function(e,t,n){"use strict";var a,r,i,o;e.addEventListener&&(a=n&&n.cfg||e.lazySizesConfig||{},r=a.lazyClass||"lazyload",i=function(){var e,a;if("string"==typeof r&&(r=t.getElementsByClassName(r)),n)for(e=0,a=r.length;e<a;e++)n.loader.unveil(r[e])},addEventListener("beforeprint",i,!1),!("onbeforeprint"in e)&&e.matchMedia&&(o=matchMedia("print"))&&o.addListener&&o.addListener(function(){o.matches&&i()}))}),function(e,t){var n=function(e,t){"use strict";if(t.getElementsByClassName){var n,a,r=t.documentElement,i=e.Date,o=e.HTMLPictureElement,s=e.addEventListener,l=e.setTimeout,d=e.requestAnimationFrame||l,c=e.requestIdleCallback,u=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],g={},m=Array.prototype.forEach,h=function(e,t){return g[t]||(g[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),g[t].test(e.getAttribute("class")||"")&&g[t]},v=function(e,t){h(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},p=function(e,t){var n;(n=h(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(n," "))},b=function(e,t,n){var a=n?"addEventListener":"removeEventListener";n&&b(e,t),f.forEach(function(n){e[a](n,t)})},y=function(e,a,r,i,o){var s=t.createEvent("CustomEvent");return r||(r={}),r.instance=n,s.initCustomEvent(a,!i,!o,r),e.dispatchEvent(s),s},z=function(t,n){var r;!o&&(r=e.picturefill||a.pf)?r({reevaluate:!0,elements:[t]}):n&&n.src&&(t.src=n.src)},C=function(e,t){return(getComputedStyle(e,null)||{})[t]},E=function(e,t,n){for(n=n||e.offsetWidth;n<a.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},A=function(){var e,n,a=[],r=[],i=a,o=function(){var t=i;for(i=a.length?r:a,e=!0,n=!1;t.length;)t.shift()();e=!1},s=function(a,r){e&&!r?a.apply(this,arguments):(i.push(a),n||(n=!0,(t.hidden?l:d)(o)))};return s._lsFlush=o,s}(),x=function(e,t){return t?function(){A(e)}:function(){var t=this,n=arguments;A(function(){e.apply(t,n)})}},w=function(e){var t,n=0,a=666,r=function(){t=!1,n=i.now(),e()},o=c?function(){c(r,{timeout:a}),666!==a&&(a=666)}:x(function(){l(r)},!0);return function(e){var r;(e=!0===e)&&(a=44),t||(t=!0,r=125-(i.now()-n),r<0&&(r=0),e||r<9&&c?o():l(o,r))}},N=function(e){var t,n,a=function(){t=null,e()},r=function(){var e=i.now()-n;e<99?l(r,99-e):(c||a)(a)};return function(){n=i.now(),t||(t=l(r,99))}},L=function(){var o,d,c,f,g,E,L,S,B,O,W,I,R,D,_=/^img$/i,T=/^iframe$/i,k="onscroll"in e&&!/glebot/.test(navigator.userAgent),P=0,q=0,F=-1,H=function(e){q--,e&&e.target&&b(e.target,H),(!e||q<0||!e.target)&&(q=0)},j=function(e,n){var a,i=e,o="hidden"==C(t.body,"visibility")||"hidden"!=C(e,"visibility");for(S-=n,W+=n,B-=n,O+=n;o&&(i=i.offsetParent)&&i!=t.body&&i!=r;)(o=(C(i,"opacity")||1)>0)&&"visible"!=C(i,"overflow")&&(a=i.getBoundingClientRect(),o=O>a.left&&B<a.right&&W>a.top-1&&S<a.bottom+1);return o},$=function(){var e,i,s,l,c,u,g,m,h,v=n.elements;if((f=a.loadMode)&&q<8&&(e=v.length)){i=0,F++,null==R&&("expand"in a||(a.expand=r.clientHeight>500&&r.clientWidth>500?500:370),I=a.expand,R=I*a.expFactor),P<R&&q<1&&F>2&&f>2&&!t.hidden?(P=R,F=0):P=f>1&&F>1&&q<6?I:0;for(;i<e;i++)if(v[i]&&!v[i]._lazyRace)if(k)if((m=v[i].getAttribute("data-expand"))&&(u=1*m)||(u=P),h!==u&&(E=innerWidth+u*D,L=innerHeight+u,g=-1*u,h=u),s=v[i].getBoundingClientRect(),(W=s.bottom)>=g&&(S=s.top)<=L&&(O=s.right)>=g*D&&(B=s.left)<=E&&(W||O||B||S)&&(a.loadHidden||"hidden"!=C(v[i],"visibility"))&&(d&&q<3&&!m&&(f<3||F<4)||j(v[i],u))){if(Y(v[i]),c=!0,q>9)break}else!c&&d&&!l&&q<4&&F<4&&f>2&&(o[0]||a.preloadAfterLoad)&&(o[0]||!m&&(W||O||B||S||"auto"!=v[i].getAttribute(a.sizesAttr)))&&(l=o[0]||v[i]);else Y(v[i]);l&&!c&&Y(l)}},G=w($),U=function(e){v(e.target,a.loadedClass),p(e.target,a.loadingClass),b(e.target,K),y(e.target,"lazyloaded")},J=x(U),K=function(e){J({target:e.target})},Q=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},V=function(e){var t,n=e.getAttribute(a.srcsetAttr);(t=a.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},X=x(function(e,t,n,r,i){var o,s,d,f,g,h;(g=y(e,"lazybeforeunveil",t)).defaultPrevented||(r&&(n?v(e,a.autosizesClass):e.setAttribute("sizes",r)),s=e.getAttribute(a.srcsetAttr),o=e.getAttribute(a.srcAttr),i&&(d=e.parentNode,f=d&&u.test(d.nodeName||"")),h=t.firesLoad||"src"in e&&(s||o||f),g={target:e},h&&(b(e,H,!0),clearTimeout(c),c=l(H,2500),v(e,a.loadingClass),b(e,K,!0)),f&&m.call(d.getElementsByTagName("source"),V),s?e.setAttribute("srcset",s):o&&!f&&(T.test(e.nodeName)?Q(e,o):e.src=o),i&&(s||f)&&z(e,{src:o})),e._lazyRace&&delete e._lazyRace,p(e,a.lazyClass),A(function(){(!h||e.complete&&e.naturalWidth>1)&&(h?H(g):q--,U(g))},!0)}),Y=function(e){var t,n=_.test(e.nodeName),r=n&&(e.getAttribute(a.sizesAttr)||e.getAttribute("sizes")),i="auto"==r;(!i&&d||!n||!e.getAttribute("src")&&!e.srcset||e.complete||h(e,a.errorClass))&&(t=y(e,"lazyunveilread").detail,i&&M.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,q++,X(e,t,i,r,n))},Z=function(){if(!d){if(i.now()-g<999)return void l(Z,999);var e=N(function(){a.loadMode=3,G()});d=!0,a.loadMode=3,G(),s("scroll",function(){3==a.loadMode&&(a.loadMode=2),e()},!0)}};return{_:function(){g=i.now(),n.elements=t.getElementsByClassName(a.lazyClass),o=t.getElementsByClassName(a.lazyClass+" "+a.preloadClass),D=a.hFac,s("scroll",G,!0),s("resize",G,!0),e.MutationObserver?new MutationObserver(G).observe(r,{childList:!0,subtree:!0,attributes:!0}):(r.addEventListener("DOMNodeInserted",G,!0),r.addEventListener("DOMAttrModified",G,!0),setInterval(G,999)),s("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t.addEventListener(e,G,!0)}),/d$|^c/.test(t.readyState)?Z():(s("load",Z),t.addEventListener("DOMContentLoaded",G),l(Z,2e4)),n.elements.length?($(),A._lsFlush()):G()},checkElems:G,unveil:Y}}(),M=function(){var e,n=x(function(e,t,n,a){var r,i,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),u.test(t.nodeName||""))for(r=t.getElementsByTagName("source"),i=0,o=r.length;i<o;i++)r[i].setAttribute("sizes",a);n.detail.dataAttr||z(e,n.detail)}),r=function(e,t,a){var r,i=e.parentNode;i&&(a=E(e,i,a),r=y(e,"lazybeforesizes",{width:a,dataAttr:!!t}),r.defaultPrevented||(a=r.detail.width)&&a!==e._lazysizesWidth&&n(e,i,r,a))},i=function(){var t,n=e.length;if(n)for(t=0;t<n;t++)r(e[t])},o=N(i);return{_:function(){e=t.getElementsByClassName(a.autosizesClass),s("resize",o)},checkElems:o,updateElem:r}}(),S=function(){S.i||(S.i=!0,M._(),L._())};return function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0};a=e.lazySizesConfig||e.lazysizesConfig||{};for(t in n)t in a||(a[t]=n[t]);e.lazySizesConfig=a,l(function(){a.init&&S()})}(),n={cfg:a,autoSizer:M,loader:L,init:S,uP:z,aC:v,rC:p,hC:h,fire:y,gW:E,rAF:A}}}(e,e.document);e.lazySizes=n,"object"==typeof module&&module.exports&&(module.exports=n)}(window);