/*!
 * ImageSet (1.0.0-beta1)
 *
 * This script file is needed for lazyloading imagesets,
 * generated with ImageSet for Kirby and rendering placeholder
 * effeccts
 *
 * Copyright (c) 2016 Fabian Michael <hallo@fabianmichael.de>
 * @license SEE LICENSE IN license.md
 *
 * This script also includes:
 *
 *   StackBlur 0.6
 *   Copyright (c) 2010 Mario Klingemann <mario@quasimondo.com>
 *   https://github.com/Quasimondo/QuasimondoJS
 *
 *   lazysizes 2.0.7 (with "static-gecko-picture" plugin)
 *   Copyright (C) 2015 Alexander Farkas, released under MIT license
 *   https://github.com/aFarkas/lazysizes
 * 
 */
!function(e,t,n){"use strict";function a(e,t,n,a,r,o,s,l){var u=e.getContext("2d"),d=u.getImageData(t,n,a,r);d=i(d,o,s,l),u.putImageData(d,t,n)}function i(e,t,n,a){var i,r,s,l,u,d,c,f,g,m,h,v,p,b,z,y,A,C,E,x,w,N,L,S,M,B=e.data,O=e.width,R=e.height,W=t+t+1,I=O-1,T=R-1,D=t+1,_=D*(D+1)/2,P=new o,k=P;for(s=1;s<W;s++)k=k.next=new o,s==D&&(M=k);k.next=P;var q=null,H=null;for(c=d=0,r=0;r<R;r++){for(y=A=C=E=f=g=m=h=0,v=D*(x=B[d]),p=D*(w=B[d+1]),b=D*(N=B[d+2]),z=D*(L=B[d+3]),f+=_*x,g+=_*w,m+=_*N,h+=_*L,k=P,s=0;s<D;s++)k.r=x,k.g=w,k.b=N,k.a=L,k=k.next;for(s=1;s<D;s++)l=d+((I<s?I:s)<<2),f+=(k.r=x=B[l])*(S=D-s),g+=(k.g=w=B[l+1])*S,m+=(k.b=N=B[l+2])*S,h+=(k.a=L=B[l+3])*S,y+=x,A+=w,C+=N,E+=L,k=k.next;for(q=P,H=M,i=0;i<O;i++)B[d]=f*n>>a,B[d+1]=g*n>>a,B[d+2]=m*n>>a,B[d+3]=h*n>>a,f-=v,g-=p,m-=b,h-=z,v-=q.r,p-=q.g,b-=q.b,z-=q.a,l=c+((l=i+t+1)<I?l:I)<<2,y+=q.r=B[l],A+=q.g=B[l+1],C+=q.b=B[l+2],E+=q.a=B[l+3],f+=y,g+=A,m+=C,h+=E,q=q.next,v+=x=H.r,p+=w=H.g,b+=N=H.b,z+=L=H.a,y-=x,A-=w,C-=N,E-=L,H=H.next,d+=4;c+=O}for(i=0;i<O;i++){for(A=C=E=y=g=m=h=f=0,d=i<<2,v=D*(x=B[d]),p=D*(w=B[d+1]),b=D*(N=B[d+2]),z=D*(L=B[d+3]),f+=_*x,g+=_*w,m+=_*N,h+=_*L,k=P,s=0;s<D;s++)k.r=x,k.g=w,k.b=N,k.a=L,k=k.next;for(u=O,s=1;s<=t;s++)d=u+i<<2,f+=(k.r=x=B[d])*(S=D-s),g+=(k.g=w=B[d+1])*S,m+=(k.b=N=B[d+2])*S,h+=(k.a=L=B[d+3])*S,y+=x,A+=w,C+=N,E+=L,k=k.next,s<T&&(u+=O);for(d=i,q=P,H=M,r=0;r<R;r++)l=d<<2,B[l+3]=L=h*n>>a,L>0?(L=255/L,B[l]=(f*n>>a)*L,B[l+1]=(g*n>>a)*L,B[l+2]=(m*n>>a)*L):B[l]=B[l+1]=B[l+2]=0,f-=v,g-=p,m-=b,h-=z,v-=q.r,p-=q.g,b-=q.b,z-=q.a,l=i+((l=r+D)<T?l:T)*O<<2,f+=y+=q.r=B[l],g+=A+=q.g=B[l+1],m+=C+=q.b=B[l+2],h+=E+=q.a=B[l+3],q=q.next,v+=x=H.r,p+=w=H.g,b+=N=H.b,z+=L=H.a,y-=x,A-=w,C-=N,E-=L,H=H.next,d+=O}return e}function r(e,t,n,a,i,r,s,l){var u,d,c,f,g,m,h,v,p,b,z,y,A,C,E,x,w,N,L,S,M,B=e.getContext("2d"),O=B.getImageData(t,n,a,i),R=O.data,W=r+r+1,I=a-1,T=i-1,D=r+1,_=D*(D+1)/2,P=new o,k=P;for(c=1;c<W;c++)k=k.next=new o,c==D&&(M=k);k.next=P;var q=null,H=null;for(h=m=0,d=0;d<i;d++){for(C=E=x=v=p=b=0,z=D*(w=R[m]),y=D*(N=R[m+1]),A=D*(L=R[m+2]),v+=_*w,p+=_*N,b+=_*L,k=P,c=0;c<D;c++)k.r=w,k.g=N,k.b=L,k=k.next;for(c=1;c<D;c++)f=m+((I<c?I:c)<<2),v+=(k.r=w=R[f])*(S=D-c),p+=(k.g=N=R[f+1])*S,b+=(k.b=L=R[f+2])*S,C+=w,E+=N,x+=L,k=k.next;for(q=P,H=M,u=0;u<a;u++)R[m]=v*s>>l,R[m+1]=p*s>>l,R[m+2]=b*s>>l,v-=z,p-=y,b-=A,z-=q.r,y-=q.g,A-=q.b,f=h+((f=u+r+1)<I?f:I)<<2,C+=q.r=R[f],E+=q.g=R[f+1],x+=q.b=R[f+2],v+=C,p+=E,b+=x,q=q.next,z+=w=H.r,y+=N=H.g,A+=L=H.b,C-=w,E-=N,x-=L,H=H.next,m+=4;h+=a}for(u=0;u<a;u++){for(E=x=C=p=b=v=0,m=u<<2,z=D*(w=R[m]),y=D*(N=R[m+1]),A=D*(L=R[m+2]),v+=_*w,p+=_*N,b+=_*L,k=P,c=0;c<D;c++)k.r=w,k.g=N,k.b=L,k=k.next;for(g=a,c=1;c<=r;c++)m=g+u<<2,v+=(k.r=w=R[m])*(S=D-c),p+=(k.g=N=R[m+1])*S,b+=(k.b=L=R[m+2])*S,C+=w,E+=N,x+=L,k=k.next,c<T&&(g+=a);for(m=u,q=P,H=M,d=0;d<i;d++)f=m<<2,R[f]=v*s>>l,R[f+1]=p*s>>l,R[f+2]=b*s>>l,v-=z,p-=y,b-=A,z-=q.r,y-=q.g,A-=q.b,f=u+((f=d+D)<T?f:T)*a<<2,v+=C+=q.r=R[f],p+=E+=q.g=R[f+1],b+=x+=q.b=R[f+2],q=q.next,z+=w=H.r,y+=N=H.g,A+=L=H.b,C-=w,E-=N,x-=L,H=H.next,m+=a}B.putImageData(O,t,n)}function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e.stackBlur={canvasRGB:r,canvasRGBA:a}}(window,document),function(e,t,n,a,i){"use strict";function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e,t){var n=null;return function(){var a=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(a,i)},t)}}function s(e,t){e.complete&&void 0!==e.naturalWidth&&0!==e.naturalWidth?t():e.addEventListener("load",t)}function l(t,n){var a=e.devicePixelRatio||1,i=n.webkitBackingStorePixelRatio||1,r=a/i;if(a!==i){var o=t.width,s=t.height;t.width=o*r,t.height=s*r,n.scale(r,r)}return r}function u(e){var t=e.className.match(w);return!!t&&t[1]}function d(){function n(){for(var e,t,n,r=0,o=i.length;r<o;r++)i[r]&&(t=i[r],C(t,h)||(e=u(t))&&N[e]&&(E(t,h),n=N[e](t),"async"===a.placeholderRendering?A.add(n):n()))}var a=e.imagesetConfig=r({autoUpdate:!0,placeholderRendering:"async"},e.imagesetConfig||{}),i=t.getElementsByClassName(m),s=o(n);return t.addEventListener("lazybeforeunveil",function(e){var n=e.target,a=n.parentNode;if(C(n,v)){for(;!C(a,c);)a=a.parentNode;var i=function(){n.removeEventListener("load",i),y(function(){E(a,f)})},r=function(){n.removeEventListener("error",r),y(function(){var e=t.createElement("span");E(e,"imageset-error"),a.appendChild(e),y(function(){E(a,g)})})};n.addEventListener("load",i),n.addEventListener("error",r)}}),a.autoUpdate?(e.MutationObserver?new e.MutationObserver(s).observe(b,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):(b.addEventListener("DOMNodeInserted",s,!0),b.addEventListener("DOMAttrModified",s,!0),setInterval(s,999)),e.addEventListener("hashchange",s,!0),s()):n(),{update:n}}if(t.getElementsByClassName){var c="imageset",f="is-loaded",g="has-error",m=c+" -placeholder",h="is-placeholder-rendered",v=c+"-element",p=c+"-placeholder",b=t.documentElement,z=navigator.userAgent,y=e.requestAnimationFrame||function(e){setTimeout(e,1e3/60)},A=function(){function e(e){a.push(e),n()}function t(){a.shift()(),a.length?y(t):i=!1}function n(){i||(i=!0,y(t))}var a=[],i=!1;return{add:e}}(),C=function(){return b.classList?function(e,t){return e.classList.contains(t)}:function(e,t){return!!~e.className.split(/\s+/).indexOf(t)}}(),E=function(){return b.classList?function(e,t){e.classList.add(t)}:function(e,t){var n=e.className.split(/\s+/);~n.indexOf(t)||(n.push(t),e.className=n.join(" "))}}();(function(){b.classList})();if("[object OperaMini]"===Object.prototype.toString.call(e.operamini)){e.lazySizesConfig=e.lazySizesConfig||{},e.lazySizesConfig.init=!1,E(b,"operamini");var x=function(t){var n=t.getElementsByTagName("source"),a=t.getElementsByClassName(v)[0];if(E(t,f),e.HTMLPictureElement){for(var i=0,r=n.length;i<r;i++){var o=n[i];o.hasAttribute("data-srcset")&&(o.srcset=o.getAttribute("data-srcset")),o.hasAttribute("data-src")&&(o.src=o.getAttribute("data-src"))}a.hasAttribute("data-srcset")&&(a.srcset=a.getAttribute("data-srcset")),a.hasAttribute("data-src")&&(a.src=a.getAttribute("data-src"))}else{for(var s=n.length>0?n[n.length-1]:a,l=s.getAttribute("data-srcset").split(/,\s+/);n.length>0;)n[0].parentNode.removeChild(n[0]);a.src=l.pop().replace(/\s+\d+[wx]$/,"")}};return void function(e){"loading"!=t.readyState?e():t.addEventListener("DOMContentLoaded",e)}(function(){for(var e=t.getElementsByClassName(c),n=0,a=e.length;n<a;n++)x(e[n])})}var w=new RegExp("-placeholder:([a-z0-9_-]+)\\s*","i"),N={};if(e.CanvasRenderingContext2D){var L=-1!==z.indexOf("Safari")&&-1===z.indexOf("Chrome");("imageRendering"in b.style||"msInterpolationMode"in b.style)&&!L||(N.mosaic=function(e){var n=t.createElement("canvas"),a=n.getContext("2d"),i=e.getElementsByClassName(p)[0],r=function(){l(n,a);var t=i.naturalWidth,r=i.naturalHeight,o=e.offsetWidth,s=e.offsetWidth/t*r+.5|0;return n.width=o,n.height=s,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,n.setAttribute("aria-hidden",!0),n.className=i.className,function(){a.drawImage(i,0,0,o,s),i.parentNode.replaceChild(n,i)}};return function(){s(i,r)}});var S=function(e,n,a,i){var r=e.getElementsByClassName(p)[0],o=function(){var o=r.naturalWidth,s=r.naturalHeight,l=e.offsetWidth,u=e.offsetWidth/o*s+.5|0,d=t.createElement("canvas"),c=d.getContext("2d"),f=C(e,"-alpha");d.width=l,d.height=u,!f&&"mozOpaque"in d&&(d.mozOpaque=!0),d.setAttribute("aria-hidden",!0),d.className=r.className,c.drawImage(r,0,0,l,u),stackBlur[f?"canvasRGBA":"canvasRGB"](d,0,0,l,u,n,a,i),r.parentNode.replaceChild(d,r)};return function(){s(r,o)}};N.blurred=function(e){return S(e,15,512,17)},N.lqip=function(e){return S(e,7,512,15)};var M=function(e,t,a){a=!!a;var i=e.getContext("2d"),r=i.getImageData(0,0,e.width,e.height),o=r.data,s=r.width,u=r.height,d=s-1,c=u-1,f=n.round(t*(n.sqrt(3)/2)),g=f/2,m=t/2;l(e,i);var h,v,p,b,z,y,A,C,E,x,w,N,L,S,M,B,O,R=function(e,n,a,r){r=r||!1;var o=e+(r?0:f);i.beginPath(),i.moveTo(o,n+0),i.lineTo(e+(r?f:0),n+m),i.lineTo(o,n+t),i.fill(),i.closePath()},W=function(e,t){var n=t*s*4+4*e;return[o[n],o[n+1],o[n+2],o[n+3]]},I=function(e,t){return o[t*s*4+4*e+3]},T=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=I(e[n][0],e[n][1]);return t/a},D=function(e){return"rgb("+e.slice(0,3).join(",")+")"},_=function(e){return e[3]/=255,"rgba("+e.join(",")+")"},P=function(e){return n.max(0,n.min(n.round(e),d))},k=function(e){return n.max(0,n.min(n.round(e),c))},q=n.ceil(s/f)+1,H=n.ceil(u/t)+1;if(a){for(v=0;v<H;v++)for(b=v*t,y=k(b+m),A=b-m,x=k(b),h=0;h<q;h++)p=h*f,S=h%2!=0,P(p),z=k(b),E=P(S?p+f-1:p),C=P(S?p:p+f-1),N=P(p+g),L=k(b+m),M=[[C,z],[E,L],[C,k(b+t-1)],[N,L],[N,L]],B=T(M)+.5|0,i.fillStyle=_([B,0,0,255]),i.fillRect(p,b,f,t),M=[[C,k(b-m)],[E,z],[C,k(b+m-1)],[N,z],[N,z]],B=T(M)+.5|0,i.fillStyle=_([B,0,0,255]),R(p,A,0,S);var F=i.getImageData(0,0,e.width,e.height),$=F.data,j=$.length;for(O=0;O<j;O+=4)$[O+3]=$[O];i.putImageData(F,0,0),i.globalCompositeOperation="source-atop"}for(v=0;v<H;v++)for(b=v*t,y=k(b+m),A=b-m,x=k(b),h=0;h<q;h++)p=h*f,w=P(p+g),S=h%2!=0,i.fillStyle=D(W(w,y)),i.fillRect(p,b,f,t),i.fillStyle=D(W(w,x)),R(p,A,0,S);a&&(i.globalCompositeOperation="source-over")};N.triangles=function(e){var a=e.getElementsByClassName(p)[0],i=function(){var i=a.naturalWidth,r=a.naturalHeight,o=e.offsetWidth,s=n.round(e.offsetWidth/i*r),l=t.createElement("canvas"),u=l.getContext("2d"),d=C(e,"-alpha");l.width=o,l.height=s,!d&&"mozOpaque"in l&&(l.mozOpaque=!0),l.setAttribute("aria-hidden",!0),l.className=a.className,u.drawImage(a,0,0,o,s),M(l,40,d),a.parentNode.replaceChild(l,a)};return function(){s(a,i)}}}var B=new d;e.imageset=B}}(window,document,Math,Date),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<41&&addEventListener("resize",function(){var t,n=document.createElement("source"),a=function(e){var t,a,i=e.parentNode;"PICTURE"===i.nodeName.toUpperCase()?(t=n.cloneNode(),i.insertBefore(t,i.firstElementChild),setTimeout(function(){i.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,a=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=a}))},i=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)a(t[e])},r=function(){clearTimeout(t),t=setTimeout(i,99)},o=e.matchMedia&&matchMedia("(orientation: landscape)"),s=function(){r(),o&&o.addListener&&o.addListener(r)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?s():document.addEventListener("DOMContentLoaded",s),r}())}(window),function(e){"use strict";var t,n,a,i;e.addEventListener&&(t=e.lazySizes&&lazySizes.cfg||e.lazySizesConfig||{},n=t.lazyClass||"lazyload",a=function(){var t,a;if("string"==typeof n&&(n=document.getElementsByClassName(n)),e.lazySizes)for(t=0,a=n.length;t<a;t++)lazySizes.loader.unveil(n[t])},addEventListener("beforeprint",a,!1),!("onbeforeprint"in e)&&e.matchMedia&&(i=matchMedia("print"))&&i.addListener&&i.addListener(function(){i.matches&&a()}))}(window),function(e,t){var n=function(e,t){"use strict";if(t.getElementsByClassName){var n,a=t.documentElement,i=e.Date,r=e.HTMLPictureElement,o=e.addEventListener,s=e.setTimeout,l=e.requestAnimationFrame||s,u=e.requestIdleCallback,d=/^picture$/i,c=["load","error","lazyincluded","_lazyloaded"],f={},g=Array.prototype.forEach,m=function(e,t){return f[t]||(f[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),f[t].test(e.getAttribute("class")||"")&&f[t]},h=function(e,t){m(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},v=function(e,t){var n;(n=m(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(n," "))},p=function(e,t,n){var a=n?"addEventListener":"removeEventListener";n&&p(e,t),c.forEach(function(n){e[a](n,t)})},b=function(e,n,a,i,r){var o=t.createEvent("CustomEvent");return o.initCustomEvent(n,!i,!r,a||{}),e.dispatchEvent(o),o},z=function(t,a){var i;!r&&(i=e.picturefill||n.pf)?i({reevaluate:!0,elements:[t]}):a&&a.src&&(t.src=a.src)},y=function(e,t){return(getComputedStyle(e,null)||{})[t]},A=function(e,t,a){for(a=a||e.offsetWidth;a<n.minSize&&t&&!e._lazysizesWidth;)a=t.offsetWidth,t=t.parentNode;return a},C=function(){var e,n,a=[],i=function(){var t;for(e=!0,n=!1;a.length;)t=a.shift(),t[0].apply(t[1],t[2]);e=!1},r=function(r){e?r.apply(this,arguments):(a.push([r,this,arguments]),n||(n=!0,(t.hidden?s:l)(i)))};return r._lsFlush=i,r}(),E=function(e,t){return t?function(){C(e)}:function(){var t=this,n=arguments;C(function(){e.apply(t,n)})}},x=function(e){var t,n=0,a=666,r=function(){t=!1,n=i.now(),e()},o=u?function(){u(r,{timeout:a}),666!==a&&(a=666)}:E(function(){s(r)},!0);return function(e){var r;(e=!0===e)&&(a=44),t||(t=!0,r=125-(i.now()-n),r<0&&(r=0),e||r<9&&u?o():s(o,r))}},w=function(e){var t,n,a=function(){t=null,e()},r=function(){var e=i.now()-n;e<99?s(r,99-e):(u||a)(a)};return function(){n=i.now(),t||(t=s(r,99))}},N=function(){var r,l,u,c,f,A,N,S,M,B,O,R,W,I,T,D=/^img$/i,_=/^iframe$/i,P="onscroll"in e&&!/glebot/.test(navigator.userAgent),k=0,q=0,H=-1,F=function(e){q--,e&&e.target&&p(e.target,F),(!e||q<0||!e.target)&&(q=0)},$=function(e,n){var i,r=e,o="hidden"==y(t.body,"visibility")||"hidden"!=y(e,"visibility");for(M-=n,R+=n,B-=n,O+=n;o&&(r=r.offsetParent)&&r!=t.body&&r!=a;)(o=(y(r,"opacity")||1)>0)&&"visible"!=y(r,"overflow")&&(i=r.getBoundingClientRect(),o=O>i.left&&B<i.right&&R>i.top-1&&M<i.bottom+1);return o},j=function(){var e,i,o,s,d,c,g,m,h;if((f=n.loadMode)&&q<8&&(e=r.length)){i=0,H++,null==I&&("expand"in n||(n.expand=a.clientHeight>500&&a.clientWidth>500?500:370),W=n.expand,I=W*n.expFactor),k<I&&q<1&&H>2&&f>2&&!t.hidden?(k=I,H=0):k=f>1&&H>1&&q<6?W:0;for(;i<e;i++)if(r[i]&&!r[i]._lazyRace)if(P)if((m=r[i].getAttribute("data-expand"))&&(c=1*m)||(c=k),h!==c&&(N=innerWidth+c*T,S=innerHeight+c,g=-1*c,h=c),o=r[i].getBoundingClientRect(),(R=o.bottom)>=g&&(M=o.top)<=S&&(O=o.right)>=g*T&&(B=o.left)<=N&&(R||O||B||M)&&(u&&q<3&&!m&&(f<3||H<4)||$(r[i],c))){if(Y(r[i]),d=!0,q>9)break}else!d&&u&&!s&&q<4&&H<4&&f>2&&(l[0]||n.preloadAfterLoad)&&(l[0]||!m&&(R||O||B||M||"auto"!=r[i].getAttribute(n.sizesAttr)))&&(s=l[0]||r[i]);else Y(r[i]);s&&!d&&Y(s)}},G=x(j),U=function(e){h(e.target,n.loadedClass),v(e.target,n.loadingClass),p(e.target,Q)},K=E(U),Q=function(e){K({target:e.target})},J=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},V=function(e){var t,a,i=e.getAttribute(n.srcsetAttr);(t=n.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i),t&&(a=e.parentNode,a.insertBefore(e.cloneNode(),e),a.removeChild(e))},X=E(function(e,t,a,i,r){var o,l,u,f,m,y;(m=b(e,"lazybeforeunveil",t)).defaultPrevented||(i&&(a?h(e,n.autosizesClass):e.setAttribute("sizes",i)),l=e.getAttribute(n.srcsetAttr),o=e.getAttribute(n.srcAttr),r&&(u=e.parentNode,f=u&&d.test(u.nodeName||"")),y=t.firesLoad||"src"in e&&(l||o||f),m={target:e},y&&(p(e,F,!0),clearTimeout(c),c=s(F,2500),h(e,n.loadingClass),p(e,Q,!0)),f&&g.call(u.getElementsByTagName("source"),V),l?e.setAttribute("srcset",l):o&&!f&&(_.test(e.nodeName)?J(e,o):e.src=o),(l||f)&&z(e,{src:o})),C(function(){e._lazyRace&&delete e._lazyRace,v(e,n.lazyClass),y&&!e.complete||(y?F(m):q--,U(m))})}),Y=function(e){var t,a=D.test(e.nodeName),i=a&&(e.getAttribute(n.sizesAttr)||e.getAttribute("sizes")),r="auto"==i;(!r&&u||!a||!e.src&&!e.srcset||e.complete||m(e,n.errorClass))&&(t=b(e,"lazyunveilread").detail,r&&L.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,q++,X(e,t,r,i,a))},Z=function(){if(!u){if(i.now()-A<999)return void s(Z,999);var e=w(function(){n.loadMode=3,G()});u=!0,n.loadMode=3,G(),o("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){A=i.now(),r=t.getElementsByClassName(n.lazyClass),l=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),T=n.hFac,o("scroll",G,!0),o("resize",G,!0),e.MutationObserver?new MutationObserver(G).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a.addEventListener("DOMNodeInserted",G,!0),a.addEventListener("DOMAttrModified",G,!0),setInterval(G,999)),o("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t.addEventListener(e,G,!0)}),/d$|^c/.test(t.readyState)?Z():(o("load",Z),t.addEventListener("DOMContentLoaded",G),s(Z,2e4)),r.length?j():G()},checkElems:G,unveil:Y}}(),L=function(){var e,a=E(function(e,t,n,a){var i,r,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),d.test(t.nodeName||""))for(i=t.getElementsByTagName("source"),r=0,o=i.length;r<o;r++)i[r].setAttribute("sizes",a);n.detail.dataAttr||z(e,n.detail)}),i=function(e,t,n){var i,r=e.parentNode;r&&(n=A(e,r,n),i=b(e,"lazybeforesizes",{width:n,dataAttr:!!t}),i.defaultPrevented||(n=i.detail.width)&&n!==e._lazysizesWidth&&a(e,r,i,n))},r=function(){var t,n=e.length;if(n)for(t=0;t<n;t++)i(e[t])},s=w(r);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),o("resize",s)},checkElems:s,updateElem:i}}(),S=function(){S.i||(S.i=!0,L._(),N._())};return function(){var t,a={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in a)t in n||(n[t]=a[t]);e.lazySizesConfig=n,s(function(){n.init&&S()})}(),{cfg:n,autoSizer:L,loader:N,init:S,uP:z,aC:h,rC:v,hC:m,fire:b,gW:A,rAF:C}}}(e,e.document);e.lazySizes=n,"object"==typeof module&&module.exports&&(module.exports=n)}(window);